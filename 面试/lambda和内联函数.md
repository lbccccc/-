# lambda

### 在java里面

java的lambda和kotlin的lambda不一样，kotlin的lambda功能更强。

在java里面只有在SAM（single abstract method）接口才能使用lambda表达式来创建匿名类对象，

### 在kotlin里面

但是在kotlin里面lambda是一个实实在在的函数类型的对象，功能更强。

kotlin不允许使用lambda来简写匿名类对象，因为kotlin有函数类型的参数，所以这种单函数接口的写法从根本上就没必要写了。kotlin更加希望我们直接使用函数类型的参数



但是当和java交互的时候，当函数参数是java的单抽象方法的接口的时候，依旧可以使用lambda来写参数，这是因为kotlin会为它们额外创建一个把参数替换成函数类型的桥接方法



## 总结

在kotlin里面有一种java不存在的类型，函数类型，这一类对象能作为函数来使用的同时，还能作为函数的参数，函数的返回值以及赋值给变量



创建一个函数类型的对象有三种方法： 

1. 双冒号加上函数名
2. 匿名函数
3. lambda



### java的编译时常量（常量内联）

1. final修饰
2. 只能是字符串或者基本类型
3. 在声明时就赋值
4. 赋值表达式简单

这个是常量内敛                   在kotlin里面const关键字，



### 在kotlin里面函数内敛

因为函数体很复杂，而函数内敛会导致函数体被拷贝到每个调用到它的地方。

这个时候如果函数体比较大，而调用处又比较多，就会导致编译出来的字节码变大很多。

所以inline不能用来做性能优化



inline和高阶函数搭配使用



kotlin官方的源码里，max函数也是被inline了的，它的内部调用的是java的静态Math.max





2020 10.23 14.01
